---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import FeaturesGrid from '../components/FeaturesGrid.astro';
import ImageText from '../components/ImageText.astro';
import TeamSection from '../components/TeamSection.astro';
import TextSection from '../components/TextSection.astro';

// Import page content from Tina
import pageContent from '../../content/pages/chi-siamo.json';

const { hero, sections, seo } = pageContent;
---

<Layout title={seo?.metaTitle || pageContent.title} description={seo?.metaDescription}>
  <!-- Hero Section -->
  {hero && (
    <Hero
      headline={hero.headline || ''}
      subheadline={hero.subheadline}
      backgroundImage={hero.backgroundImage}
      compact={true}
    />
  )}

  <!-- Dynamic Sections from Tina -->
  {sections?.map((section: any) => {
    if (section._template === 'textSection') {
      return (
        <TextSection
          title={section.title}
          content={section.content}
        />
      );
    }

    if (section._template === 'featuresGrid' && section.features) {
      return (
        <FeaturesGrid
          title={section.title}
          subtitle={section.subtitle}
          features={section.features}
        />
      );
    }

    if (section._template === 'imageText') {
      return (
        <ImageText
          title={section.title}
          content={section.content}
          image={section.image}
          imageOnRight={section.imageOnRight}
        />
      );
    }

    if (section._template === 'teamSection' && section.members) {
      return (
        <TeamSection
          title={section.title}
          subtitle={section.subtitle}
          members={section.members}
        />
      );
    }

    return null;
  })}
</Layout>
